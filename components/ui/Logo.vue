<script setup lang="ts">
  defineProps<{
    animationOut?: boolean
  }>();

  const leavePage = ref(false);

  const router = useRouter();
  const route = useRoute();

  router.beforeEach((to, from, next) => {
    leavePage.value = true;
    if (from.fullPath === route.fullPath) {
      next();
    } else {
      next();
    }
  });
</script>

<template>
  <svg
    class="absolute !w-full transition duration-300"
    :class="[
      leavePage && animationOut && 'hide'
    ]"
    data-name="Layer 1"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="196.67 475.72 686.67 128.55"
  >       <path
    class="cls-1 letter"
    d="m252.74 604.27c-8.2 0-15.43-0.93-21.7-2.79s-11.68-4.44-16.21-7.73-8.29-7.17-11.27-11.64-5.28-9.31-6.89-14.53h24.78c2.86 5.28 7.02 9.12 12.48 11.51s11.74 3.58 18.82 3.58c7.82 0 14.13-1.47 18.91-4.4s7.17-6.84 7.17-11.71c0-4.5-1.65-7.93-4.94-10.3s-8.6-3.93-15.93-4.68l-21.24-2.06c-6.46-0.62-11.99-1.92-16.58-3.91-4.6-1.98-8.38-4.53-11.36-7.64-2.98-3.1-5.15-6.64-6.52-10.62-1.37-3.97-2.05-8.26-2.05-12.86 0-5.71 1.15-10.93 3.45-15.65s5.59-8.79 9.87-12.2 9.44-6.08 15.46-8.01c6.02-1.92 12.82-2.89 20.4-2.89s14.59 1.02 20.68 3.07c6.08 2.05 11.39 4.81 15.93 8.29 4.53 3.48 8.29 7.42 11.27 11.83s5.22 8.91 6.71 13.51h-24.78c-2.11-4.65-5.99-8.33-11.64-11.04-5.65-2.7-11.83-4.06-18.54-4.06-8.2 0-14.32 1.62-18.35 4.87-4.04 3.25-6.05 7.06-6.05 11.43 0 4.12 1.55 7.37 4.66 9.74 3.1 2.37 7.45 3.87 13.04 4.5l22.73 2.25c11.92 1.24 21.27 5.03 28.04 11.36s10.15 14.35 10.15 24.03c0 5.09-1.06 9.97-3.17 14.62-2.11 4.66-5.28 8.76-9.5 12.3s-9.5 6.4-15.84 8.57c-6.33 2.17-13.66 3.26-21.98 3.26z"
  />       <path
    class="cls-1 letter"
    d="m711.02 475.73c13.54 0 25.06 3.35 34.56 10.06s16.73 15.59 21.7 26.64h-26.08c-3.35-4.4-7.64-8.02-12.85-10.85-5.22-2.83-10.99-4.24-17.33-4.24-5.71 0-10.96 1.09-15.74 3.27s-8.94 5.18-12.48 8.98-6.3 8.3-8.29 13.47c-1.99 5.18-2.98 10.82-2.98 16.93s0.99 11.76 2.98 16.94 4.75 9.67 8.29 13.47 7.7 6.8 12.48 8.98 10.03 3.27 15.74 3.27c6.33 0 12.11-1.38 17.33-4.15s9.5-6.41 12.85-10.94h26.08c-4.97 11.18-12.2 20.09-21.7 26.73s-21.02 9.97-34.56 9.97c-9.07 0-17.51-1.62-25.34-4.84-7.82-3.23-14.59-7.7-20.31-13.41-5.71-5.71-10.19-12.51-13.41-20.4-3.23-7.88-4.84-16.42-4.84-25.62s1.61-17.73 4.84-25.62c3.23-7.88 7.7-14.69 13.41-20.4s12.48-10.18 20.31-13.41c7.82-3.23 16.27-4.84 25.34-4.84z"
  />       <path
    class="cls-1 letter"
    d="m883.34 478.15v21.61h-40.24v102.09h-24.4v-102.09h-40.43v-21.61h105.07z"
  />       <polygon
    class="cls-1 letter"
    points="348.68 519.5 348.68 501.55 411.09 501.55 411.09 479.94 324.27 479.94 324.27 519.5"
  />       <polygon
    class="cls-1 letter"
    points="348.68 564.08 324.27 564.08 324.27 603.64 411.09 603.64 411.09 582.03 348.68 582.03"
  />       <path
    class="cls-1 letter"
    d="m563.92 546.52 5.82-12.47h3.55v15.83h-3.12v-9.92l-4.6 9.92h-3.39l-4.6-9.92v9.92h-3.12v-15.83h3.65l5.82 12.47z"
  />       <path
    class="cls-1 letter"
    d="M584.28,550.19c-1.16,0-2.24-.21-3.24-.62-1-.41-1.87-.99-2.6-1.72-.73-.73-1.3-1.6-1.72-2.61-.41-1.01-.62-2.1-.62-3.28s.21-2.27.62-3.28c.41-1.01.99-1.88,1.72-2.61s1.6-1.3,2.6-1.72c1-.41,2.08-.62,3.24-.62,1.73,0,3.21.43,4.44,1.28,1.22.85,2.15,1.99,2.77,3.42h-3.34c-.43-.58-.97-1.05-1.63-1.4-.66-.35-1.4-.53-2.23-.53-.73,0-1.4.14-2.01.42-.61.28-1.14.66-1.6,1.15-.45.49-.81,1.06-1.06,1.72-.25.66-.38,1.38-.38,2.17s.13,1.51.38,2.17c.25.66.61,1.24,1.06,1.72.45.49.99.87,1.6,1.15.61.28,1.28.42,2.01.42,1.14,0,2.08-.31,2.8-.92.72-.61,1.22-1.43,1.49-2.44h-5.15v-2.77h8.51c0,1.37-.19,2.6-.57,3.7s-.91,2.03-1.6,2.8c-.68.77-1.49,1.36-2.42,1.78-.93.41-1.95.62-3.06.62Z"
  />       <path
    class="cls-1 letter"
    d="m604.22 546.52 5.82-12.47h3.55v15.83h-3.12v-9.92l-4.6 9.92h-3.39l-4.6-9.92v9.92h-3.12v-15.83h3.65l5.82 12.47z"
  />       <path
    class="cls-1 letter"
    d="m629.42 534.05v2.77h-5.15v13.07h-3.12v-13.07h-5.17v-2.77h13.45z"
  />       <rect
    class="cls-1 letter"
    x="436.42"
    y="479.94"
    width="24.4"
    height="39.56"
  />       <polygon
    class="cls-1 letter"
    points="460.82 582.03 460.82 564.08 436.42 564.08 436.42 603.64 523.23 603.64 523.23 582.03"
  />       <polygon
    class="cls-1 letter"
    points="605.02 519.5 629.42 519.5 629.42 479.94 542.61 479.94 542.61 501.55 605.02 501.55"
  />       <polygon
    class="cls-1 letter"
    points="605.02 564.08 605.02 582.03 542.61 582.03 542.61 603.64 629.42 603.64 629.42 564.08"
  />     </svg>
</template>

<style scoped lang="scss">
.letter {
  opacity: 0;
  transform: translateY(20px);
  animation: appear 0.5s forwards;
}

@keyframes appear {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes moveOut {
  to {
    opacity: 0;
    transform: translateY(20px);
  }
}

.letter:nth-child(1) { animation-delay: 0s; }
.letter:nth-child(2) { animation-delay: 0.1s; }
.letter:nth-child(3) { animation-delay: 0.2s; }
.letter:nth-child(4) { animation-delay: 0.3s; }
.letter:nth-child(5) { animation-delay: 0.4s; }
.letter:nth-child(6) { animation-delay: 0.5s; }
.letter:nth-child(7) { animation-delay: 0.6s; }
.letter:nth-child(8) { animation-delay: 0.7s; }
.letter:nth-child(9) { animation-delay: 0.8s; }
.letter:nth-child(10) { animation-delay: 0.9s; }
.letter:nth-child(11) { animation-delay: 0.1s; }
.letter:nth-child(12) { animation-delay: 0.11s; }
.letter:nth-child(13) { animation-delay: 0.12s; }

.hide {
  animation: moveOut 0.5s forwards;
}
</style>